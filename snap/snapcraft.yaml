name: blur-wallet
base: core
version: 0.1.9.9.1
summary: "Blur Network: The private cryptocurrency (https://blur.cash)"
description: |
    BLUR is a privacy-focused cryptocurrency based on code from Monero. The Blur
    Network focuses on fostering an educational environment within its community,
    to lower the barriers to entry for those with an interest in cryptocurrency/mining.
    BLUR can be mined with just a CPU, and does not require specialized hardware.
    Join the Fight for Financial Freedom.
grade: stable
confinement: strict

apps:
    blurd:
        command: |
          blurd-wrapper --data-dir ${HOME}/.blur-net
        plugs:
            - network
            - network-bind
    blur-wallet-rpc:
        command: |
          blur-wallet-rpc --log-file ${SNAP_USER_DATA}
        plugs:
            - home
            - network
            - network-bind
    blur-wallet-gui:
        command: |
          sh -c './start_gui.sh' --log-file ${SNAP_USER_DATA}
        plugs:
            - home
            - network

parts:
    blur-wallet:
        build-packages: [build-essential, git, cmake, pkg-config, libboost-chrono-dev, libboost-date-time-dev, libboost-locale-dev, libboost-filesystem-dev, libboost-thread-dev, libboost-atomic-dev, libboost-regex-dev, libboost-serialization-dev, libssl-dev, libsodium-dev, qtbase5-dev, qt5-default, qtdeclarative5-dev, qml-module-qtquick-controls, qml-module-qtquick-controls2, qml-module-qtquick-dialogs, qml-module-qtquick-xmllistmodel, qml-module-qt-labs-settings, qml-module-qt-labs-folderlistmodel, qttools5-dev-tools]
        plugin: cmake
        disable-parallel: true
        configflags:
            - -DCMAKE_BUILD_TYPE=Release
            - -DMANUAL_SUBMODULES=1
            - -DBUILD_TESTS=OFF
        source: .
        build: sh -c '${PWD}/../../../build_snap.sh'
        stage-packages:
            - libboost-date-time1.65.1
            - libboost-serialization1.65.1
            - libboost-chrono1.65.1
            - libboost-system1.65.1
            - libboost-thread1.65.1
            - libboost-locale1.65.1
            - libboost-atomic1.65.1
            - libboost-filesystem1.65.1
            - libboost-program-options1.65.1
            - libboost-regex1.65.1
            - libssl-dev
            - libsodium23
            - libstdc++6
            - libgcc1
            - libreadline-dev
            - libunwind-dev
            - qtbase5-dev
            - qt5-default 
            - qtdeclarative5-dev
            - qml-module-qtquick-controls
            - qml-module-qtquick-controls2
            - qml-module-qtquick-dialogs
            - qml-module-qtquick-xmllistmodel
            - qml-module-qt-labs-settings
            - qml-module-qt-labs-folderlistmodel
            - qttools5-dev-tools
        prime:
            - bin
            - usr/lib/
            - -usr/lib/gcc
            - -usr/share

    dist-files:
        plugin: dump
        source: .
        organize:
            contrib/snap/blurd.conf: etc/blurd.conf
            contrib/snap/blurd-wrapper: bin/blurd-wrapper
        prime:
            - etc
            - bin

